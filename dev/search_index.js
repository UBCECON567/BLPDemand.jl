var documenterSearchIndex = {"docs":
[{"location":"#BLPDemand.jl-1","page":"Home","title":"BLPDemand.jl","text":"","category":"section"},{"location":"#","page":"Home","title":"Home","text":"","category":"page"},{"location":"#","page":"Home","title":"Home","text":"Modules = [BLPDemand]","category":"page"},{"location":"#BLPDemand.delta-Union{Tuple{T}, Tuple{AbstractArray{T,1},AbstractArray{T,2},AbstractArray{T,2},AbstractArray{T,1}}} where T","page":"Home","title":"BLPDemand.delta","text":"function delta(s, x, ν, σ;                 tol=sqrt(eps(eltype(s))), maxiter=1000)\n\nSolves for δ in s = share(δ, ...) using contraction mapping iteration.\n\nSee also: share\n\n\n\n\n\n","category":"method"},{"location":"#BLPDemand.demandmoments-Tuple{AbstractArray{T,1} where T,AbstractArray{T,1} where T,AbstractArray{T,2} where T,Any,Any,Any}","page":"Home","title":"BLPDemand.demandmoments","text":"function demandmoments(β::AbstractVector,σ::AbstractVector,\n                       s::AbstractMatrix, \n                       x, ν, ivdemand)\n\nDemand side moments in BLP model. \n\nArguments\n\nβ length K (=number characteristics) vector of average tastes for characteristics\nσ length K vector of standard deviations of tastes\ns J × T matrix of market shares\nx K × J × T array of product characteristics\nν K × S × T array of draws of ν\nivdemand L × J × T array of instruments. Identification requries L ≥ K.\n\nReturns (moments, ξ) where vector of moments is length L with moments[l] = 1/(JT) ∑ⱼ∑ₜ ξ[j,t]*ivdemands[l,j,t]\n\nSee also: share, delta, simulateRCIVlogit\n\n\n\n\n\n","category":"method"},{"location":"#BLPDemand.dsharedp-Tuple{AbstractArray{T,1} where T,AbstractArray{T,1} where T,AbstractArray{T,1} where T,AbstractArray{T,2} where T,AbstractArray{T,2} where T,AbstractArray{T,1} where T}","page":"Home","title":"BLPDemand.dsharedp","text":"function dsharedp(β::AbstractVector,\n              σ::AbstractVector,\n              p::AbstractVector,\n              x::AbstractMatrix,\n              ν::AbstractMatrix,\n              ξ::AbstractVector)\n\nCompute market shares and their derivatives in BLP random coefficients demand model.\n\nSee sharep for argument details.\n\nReturns\n\ns vector J market shares\nds J × J Jacobian matrix with ds[l,j] = ∂s[l]/∂p[j]\nΛ J × J diagonal matrix with ds = Λ - Γ\nΓ J × J matrix \n\nSee eqprices for usage of Λ and Γ.    \n\n\n\n\n\n","category":"method"},{"location":"#BLPDemand.eqprices-Tuple{AbstractArray{T,1} where T,AbstractArray{T,1} where T,AbstractArray{T,1} where T,AbstractArray{T,1} where T,Any,Any}","page":"Home","title":"BLPDemand.eqprices","text":"function eqprices(mc::AbstractVector,\n                  β::AbstractVector, σ::AbstractVector,\n                  ξ::AbstractVector,\n                  x, ν;\n                  firmid= 1:length(mc),\n                  tol=sqrt(eps(eltype(mc))),\n                  maxiter=10000)\n\nCompute equilibrium prices in BLP model using ζ contraction method of Morrow & Skerlos (2011). \n\nArguments\n\nmc vector of J marginal costs\nβ vector of K taste coefficients\nσ vector of K taste standard deviations\nξ vector of J demand shocks\nx (K-1) × J exogenous product characteristics\nν K × S × T array of draws of ν\nfirmid= (1:J) identifier of firm producing each good. Default value assumes each good is produced by a different firm. \ntol convergence tolerance\nmaxiter maximum number of iterations.\n\n\n\n\n\n","category":"method"},{"location":"#BLPDemand.estimateBLP-Tuple{AbstractArray{T,2} where T,AbstractArray{T,3} where T,AbstractArray{T,3} where T,AbstractArray{T,3} where T,AbstractArray{T,3} where T,AbstractArray{T,3} where T}","page":"Home","title":"BLPDemand.estimateBLP","text":"estimateBLP(s, x, ν, ivdemand, w, ivsupply; method=:MPEC, verbose=true, firmid, W)\n\nEstimates a random coefficients BLP demand model\n\nArguments\n\ns J × T matrix of market shares\nx K × J × T array of product characteristics. First one must be price.\nν K × S × T array of draws for Monte Carlo integration\nivdemand L × J × T array of instruments\nw `C × J × Tarray of cost shifters\nivsupply L × J × T array of instruments. Identification requires L ≥ 2K + C\nmethod=:MPEC method for estimation. Available choices are :MPEC, :NFXP, or :GEL.\nverbose=true whether to display information about optimization progress\nfirmid J vector of firm identifies. Default value corresponds to J single product firms.\nW=I L × L weighting matrix for moments. \n\nDetails\n\nUses L unconditional moments for estimation the moments are moments[l] = 1/(JT) ∑ⱼ∑ₜ (ξ[j,t]*ivdemands[l,j,t] + ω[j,t]*ivsupply[l,j,t])\n\nMethods\n\n:NFXP nested fixed point GMM. minimize_θ G(δ(θ),θ)'W G(δ(θ),θ)\n:MPEC constrainted GMM. minimize_{θ,Δ} G(Δ, θ)' W G(Δ, θ) s.t. Δ = δ(θ)\n:GEL constrained GEL maximize_{p, θ, Δ} ∑ₜ log(p[t]) s.t. E_p[g(Δ, θ)] = 0 and Δ = δ(θ)\n\nSee also: optimalIV, varianceBLP, simulateBLP\n\n\n\n\n\n","category":"method"},{"location":"#BLPDemand.estimateRCIVlogit-NTuple{4,Any}","page":"Home","title":"BLPDemand.estimateRCIVlogit","text":"estimateRCIVlogit(s, x, ν, iv, method=:MPEC)\n\nEstimates a random coefficients IV logit model. \n\nArguments\n\ns J × T matrix of market shares\nx K × J × T array of product characteristics\nν K × S × T array of draws for MC integration\niv L × J × T array of instruments\nmethod method for estimation. Available choices are :MPEC or :NFXP.\nverbose whether to display information about optimization progress\n\n\n\n\n\n","category":"method"},{"location":"#BLPDemand.makeivblp","page":"Home","title":"BLPDemand.makeivblp","text":"function makeivblp(x::AbstractMatrix, firmid=1:size(x,2))\n\nFunction for constructing demand instrumental variables following BLP (1995).\n\nInstruments consist of exogenous product characteristics, sum of rivals exogenous characteristics, and, if there are any multi-product firms, sum of characteristics of other goods produced by the same firm.\n\n\n\n\n\n","category":"function"},{"location":"#BLPDemand.optimalIV-Tuple{Any,Any,Any,AbstractArray{T,2} where T,AbstractArray{T,3} where T,AbstractArray{T,3} where T,AbstractArray{T,3} where T,AbstractArray{T,3} where T}","page":"Home","title":"BLPDemand.optimalIV","text":"optimalIV(β,σ, γ, \n          s::AbstractMatrix,\n          x::AbstractArray{T, 3} where T, ν::AbstractArray{T,3} where T,\n          z::AbstractArray{T,3} where T, w::AbstractArray{T, 3} where T;\n          firmid=1:size(s,1), degree=2)\n\nComputes optimal instruments for BLP model. Given initial estimates θ=(β, σ, γ), computes e(θ)ⱼₜ = (ξ(θ)ⱼₜ , ω(θ)ⱼₜ)\n\nApproximates the optimal instruments with a polynomial regression of degree of  ∂e/∂θ on z. Returns fitted values from this polynomial regression.\n\n\n\n\n\n","category":"method"},{"location":"#BLPDemand.pack-Tuple{AbstractArray{T,1} where T,AbstractArray{T,1} where T}","page":"Home","title":"BLPDemand.pack","text":"pack(β::AbstractVector, σ::AbstractVector, ...)\n\nPacks parameters into a single vector, θ.\n\nReturns tuple with the packed parameters, θ, and a function to unpack them, i.e.\n\nunpack(θ) = (β, σ, ...)\n\nand\n\npack(unpack(θ)) = θ\n\n\n\n\n\n","category":"method"},{"location":"#BLPDemand.share-Tuple{AbstractArray{T,1} where T,AbstractArray{T,1} where T,AbstractArray{T,2} where T,AbstractArray{T,2} where T}","page":"Home","title":"BLPDemand.share","text":"function share(δ::AbstractVector, σ::AbstractVector, x::AbstractMatrix, ν::AbstractMatrix)\n\nCompute market shares in BLP random coefficients demand model.\n\nMarket shares are given by \n\n s_j = int frace^delta_j + x_j σ ν1+sum_i=1^J e^delta_i + x_i σ ν dF_ν(ν)\n\nArguments:\n\nδ vector of length J= number of products\nσ vector of length K= number of characteristics\nx K × J matrix of product characteristics\nν K × S matrix of simulation draws for integration\n\nReturns vector of length J market shares. \n\nSee also: delta\n\n\n\n\n\n","category":"method"},{"location":"#BLPDemand.sharep-Tuple{AbstractArray{T,1} where T,AbstractArray{T,1} where T,AbstractArray{T,1} where T,AbstractArray{T,2} where T,AbstractArray{T,2} where T,AbstractArray{T,1} where T}","page":"Home","title":"BLPDemand.sharep","text":"function sharep(β::AbstractVector,                    σ::AbstractVector,                    p::AbstractVector,                    x::AbstractMatrix,                    ν::AbstractMatrix,                    ξ::AbstractVector)\n\nCompute market shares in BLP random coefficients demand model.\n\nMarket shares are given by \n\n s_j = int frace^delta_j + x_j σ ν1+sum_i=1^J e^delta_i + x_i σ ν dF_ν(ν)\n\nwhere \n\ndelta_j = β1*pj + xj *β2end + ξj\n\nArguments:\n\nβ vector of length K= number of characteristics\nσ vector of length K= number of characteristics\np J vector of prices\nx (K-1) × J matrix of exogenous product characteristics\nν K × S matrix of simulation draws for integration\nξ J vector of demand shocks\n\nReturns vector of length J market shares. \n\nSee also: share, dsharedp  \n\n\n\n\n\n","category":"method"},{"location":"#BLPDemand.simulateBLP-Tuple{Any,Any,AbstractArray{T,1} where T,AbstractArray{T,1} where T,AbstractArray{T,1} where T,Any}","page":"Home","title":"BLPDemand.simulateBLP","text":"function simulateBLP(T, β, σ, γ, S)\n\nSimulates a BLP demand and supply model.\n\nArguments\n\nT::Integer number of markets\nβ::AbstractVector with length(β)=K, average tastes for characteristics. The first characteristic will be endogeneous (price)\nσ::AbstractVector with length(σ)=K, standard deviation of tastes for characteristics\nγ::AbstractVector marginal cost coefficients\nS number of simulation draws to calculate market shares\n\nReturns\n\nx array of product characteristics with size(x) = (K, J, T)\nz array of instruments with size(z) = (L, J, T)\ns matrix of market shares size(s) = (J,T)\nν random draws used to compute market shares, size(ν) = (K,S,T). log(-ν[1,:,:]) is N(0,1) the other components of ν are N(0,1). It is important that β[1] + σ[1]*ν[1,:,:] is negative.\nξ market demand shocks, size(ξ) = (J,T)\n\n\n\n\n\n","category":"method"},{"location":"#BLPDemand.simulateIVRClogit-NTuple{6,Any}","page":"Home","title":"BLPDemand.simulateIVRClogit","text":"function simulateIVRClogit(T, β, σ, π, ρ, S)\n\nSimulates a random coefficients logit model with endogeneity.\n\nArguments\n\nT::Integer number of markets\nβ::AbstractVector with length(β)=K, average tastes for characteristics.\nσ::AbstractVector with length(σ)=K, standard deviation of tastes for characteristics\nπ::AbstractMatrix with size(π) = (L, K, J), first stage coefficients\nρ::Number strength of endogeneity\nS number of simulation draws to calculate market shares\n\nReturns\n\nx array of product characteristics with size(x) = (K, J, T)\nz array of instruments with size(z) = (L, J, T)\ns matrix of market shares size(s) = (J,T)\nν random draws used to compute market shares, size(ν) = (K,S,T)\nξ market demand shocks, size(ξ) = (J,T)\n\n\n\n\n\n","category":"method"},{"location":"#BLPDemand.supplymoments-Tuple{AbstractArray{T,1} where T,AbstractArray{T,1} where T,AbstractArray{T,1} where T,AbstractArray{T,2} where T,Any,Any,Any,Any}","page":"Home","title":"BLPDemand.supplymoments","text":"function supplymoments(γ::AbstractVector, β::AbstractVector, σ::AbstractVector,\n                       ξ::AbstractVector, x, ν, w, ivsupply; \n                       firmid= (1:size(ξ,1)) .* fill(1, size(ξ,2))')\n\nSupply side moments in a BLP model. Assumes that marginal cost is log linear, \n\nc_jt = exp(w_jtγ + ω_jt)\n\nand prices are Bertrand-Nash\n\nc_t = p_t + (sp)^-1 s\n\nwhere ∂s/∂p is the Jacobian of shares with respect to prices, but with the j,l entry set to zero unless goods j and l are produced by the same firm. \n\nArguments\n\nγ marginal cost coefficients\nβ length K (=number characteristics) vector of average tastes for characteristics\nσ length K vector of standard deviations of tastes\nξ J × T matrix of market demand shocks\nx K × J × T array of product characteristics\nν K × S × T array of draws of ν\nw length(γ) × J × T array of cost shifters\nivsupply M × J × T array of instruments. Identification requries M ≥ length(γ).\nfirmid= (1:J) .* fill(1, T)' identifier of firm producing each good. Default value assumes each good is produced by a different firm. \n\nReturns (moments, ω) an L vector of moments with moments[l] = 1/(JT) ∑ⱼ∑ₜ ω[j,t]*ivsupply[l,j,t] \n\n\n\n\n\n","category":"method"},{"location":"#BLPDemand.varianceBLP-Tuple{Any,Any,Any,AbstractArray{T,2} where T,AbstractArray{T,3} where T,AbstractArray{T,3} where T,AbstractArray{T,3} where T,AbstractArray{T,3} where T,AbstractArray{T,3} where T}","page":"Home","title":"BLPDemand.varianceBLP","text":"varianceBLP(β, σ, γ, s::AbstractMatrix,                      x::AbstractArray{T, 3} where T, ν::AbstractArray{T,3} where T,                      ivdemand::AbstractArray{T,3} where T,                      w::AbstractArray{T, 3} where T, ivsupply::AbstractArray{T, 3} where T;                      firmid=1:size(s,1), W=I)  \n\nComputes variance of BLP estimates. Computes moment variance clustering on t. \n\nReturns Σ = covariance of [β, σ, γ] and varm = (clustered) covariance of moments.  \n\n\n\n\n\n","category":"method"},{"location":"#BLPDemand.loadblpdata-Tuple{}","page":"Home","title":"BLPDemand.loadblpdata","text":"function loadblpdata()\n\nLoads data from Berry, Levinsohn, and Pakes (1999).\n\nReturns a DataFrame.\n\n\n\n\n\n","category":"method"},{"location":"#BLPDemand.polyreg-Tuple{AbstractArray{T,2} where T,AbstractArray{T,2} where T,AbstractArray{T,2} where T}","page":"Home","title":"BLPDemand.polyreg","text":"  polyreg(xpred::AbstractMatrix,\n          xdata::AbstractMatrix,\n          ydata::AbstractMatrix; degree=1)\n\nComputes  polynomial regression of ydata on xdata. Returns predicted y at x=xpred. \n\nArguments\n\nxpred x values to compute fitted y\nxdata observed x\nydata observed y, must have size(y)[1] == size(xdata)[1]\ndegree\nderiv whether to also return df(xpred). Only implemented when  xdata is one dimentional\n\nReturns\n\nEstimates of f(xpred)\n\n\n\n\n\n","category":"method"}]
}
